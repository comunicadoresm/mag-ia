workflow:
  id: brownfield-discovery
  instance_id: brownfield-discovery-001
  name: "Brownfield Discovery - Complete Technical Debt Assessment"
  started_at: "2026-02-17T00:00:00Z"
  status: completed
  mode: guided
  target_context: core
  current_step: 11
  completed_at: "2026-02-17T02:25:00Z"
  status: completed

steps:
  - step: 1
    id: system_documentation
    phase_name: "Coleta: Sistema"
    agent: architect
    action: document-project
    creates: docs/architecture/system-architecture.md
    status: completed
    completed_at: "2026-02-17"
    optional: false

  - step: 2
    id: database_documentation
    phase_name: "Coleta: Database"
    agent: data-engineer
    action: db-schema-audit
    creates:
      - supabase/docs/SCHEMA.md
      - supabase/docs/DB-AUDIT.md
    status: completed
    completed_at: "2026-02-17"
    optional: true
    condition: project_has_database

  - step: 3
    id: frontend_documentation
    phase_name: "Coleta: Frontend/UX"
    agent: ux-design-expert
    action: create-front-end-spec
    creates: docs/frontend/frontend-spec.md
    status: completed
    completed_at: "2026-02-17"
    optional: false

  - step: 4
    id: initial_consolidation
    phase_name: "Consolidação Inicial"
    agent: architect
    action: consolidate_findings_draft
    creates: docs/prd/technical-debt-DRAFT.md
    status: completed
    completed_at: "2026-02-17"
    optional: false

  - step: 5
    id: database_specialist_review
    phase_name: "Validação: Database"
    agent: data-engineer
    action: review_and_validate
    creates: docs/reviews/db-specialist-review.md
    status: completed
    completed_at: "2026-02-17"
    optional: true
    condition: project_has_database

  - step: 6
    id: ux_specialist_review
    phase_name: "Validação: UX/Frontend"
    agent: ux-design-expert
    action: review_and_validate
    creates: docs/reviews/ux-specialist-review.md
    status: completed
    completed_at: "2026-02-17"
    optional: false

  - step: 7
    id: qa_general_review
    phase_name: "Validação: QA Review"
    agent: qa
    action: review_assessment
    creates: docs/reviews/qa-review.md
    status: completed
    completed_at: "2026-02-17"
    optional: false

  - step: 8
    id: final_assessment
    phase_name: "Assessment Final"
    agent: architect
    action: finalize_assessment
    creates: docs/prd/technical-debt-assessment.md
    status: completed
    completed_at: "2026-02-17"
    optional: false

  - step: 9
    id: executive_awareness_report
    phase_name: "Relatório Executivo"
    agent: analyst
    action: create_awareness_report
    creates: docs/reports/TECHNICAL-DEBT-REPORT.md
    status: completed
    completed_at: "2026-02-17"
    optional: false

  - step: 10
    id: epic_creation
    phase_name: "Planning: Epic"
    agent: pm
    action: brownfield-create-epic
    creates: docs/stories/epic-technical-debt.md
    status: completed
    completed_at: "2026-02-17"
    optional: false

  - step: 11
    id: story_creation
    phase_name: "Planning: Stories"
    agent: pm
    action: brownfield-create-story
    creates: "docs/stories/story-*.md"
    status: completed
    completed_at: "2026-02-17"
    optional: false

artifacts:
  - docs/architecture/system-architecture.md
  - supabase/docs/SCHEMA.md
  - supabase/docs/DB-AUDIT.md
  - docs/frontend/frontend-spec.md
  - docs/prd/technical-debt-DRAFT.md
  - docs/reviews/db-specialist-review.md
  - docs/reviews/ux-specialist-review.md
  - docs/reviews/qa-review.md
  - docs/prd/technical-debt-assessment.md
  - docs/reports/TECHNICAL-DEBT-REPORT.md
  - docs/stories/epic-technical-debt.md
  - docs/stories/story-S0-observability-foundation.md
  - docs/stories/story-S1-security-hardening.md
  - docs/stories/story-S2-frontend-foundation.md
  - docs/stories/story-S3-data-layer.md
  - docs/stories/story-S4-admin-ux-polish.md
  - docs/stories/story-S5-advanced-security.md
decisions:
  - "2026-02-17: Project uses Supabase (PostgreSQL) - database audit included"
  - "2026-02-17: FASE 4-7 completed - specialist reviews identified 5 new DB findings, 5 new UX findings, 8 QA gaps"
  - "2026-02-17: Severity reclassifications - TD-H02 and TD-H04 upgraded to CRITICAL, TD-C05/C06 downgraded to HIGH"
  - "2026-02-17: Sprint 0 (observability + tests) added per QA recommendation"
  - "2026-02-17: Total items revised from 44 to 52+ (including specialist findings)"
  - "2026-02-17: Epic + 6 stories created (Sprint 0-5) covering all 52 debt items. Estimated 7-10 weeks."
